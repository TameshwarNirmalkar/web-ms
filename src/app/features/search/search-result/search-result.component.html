<div dirScrollTop *ngIf="isDataAvailable; else makeNewSearch">
  <!-- Packets -->
  <div class="ui-g-12 ui-g-nopad" id="packetBox" *ngIf="isDataAvailable">
    <app-create-packet [visiblePacketOverlay]="visiblePacketPopup" [stone]="stoneForPacket" [showSelectedPacket]="showSelectedPacket"
      (togglePacketIcon)="togglePacketIcon($event)" (togglePacketOverlay)="togglePacketOverlay($event)" (updatePacketIcon)="updatePacketIcon($event)"></app-create-packet>
  </div>
  <div class="packet-btn-box" *ngIf="isDataAvailable" id="packetTabResultId">
    <button [dirStoreAudit]="'SHOW PACKET'" *ngIf="visibleShowPacktBtn" id="searchShowPacketBtnID" class="custom-btnPrimary show-button"
      type="button" (click)="showPacket()">{{'Show Packet' |translate}}</button>
    <ng-template [dirCheckPermission]="'create_packet_btn'">
      <button [dirStoreAudit]="'CREATE PACKET'" id="searchCreatePacketBtnID" class="custom-btnPrimary creat-button" type="button"
        (click)="createPacket()">{{'Create Packet' |translate}}</button>
    </ng-template>
  </div>

  <!-- Search results -->
  <div id="fixedPanel" class="fixed-panel-class"></div>
  <div class="ui-g-12 ui-g-nopad info-panel" id="searchTabResultId">
    <div #tabPanel class="container">
      <div class="scroller scroller-left" (click)="scrollTabPanelLeft()">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
      </div>
      <div class="scroller scroller-right" (click)="scrollTabPanelRight()">
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </div>
      <div class="wrapper-search-tab">
        <ul class="nav nav-tabs list" id="myTab">
          <li id="searchResultMenubar" *ngFor="let tab of searchResults" (click)="tabChanges(tab);isSearchTabActive();" [ngClass]="{'active-filter-menu': (tab.name === currentTabSelected || tab.newSearch === currentTabSelected || tab.stoneName === currentTabSelected || tab.pairId === currentTabSelected),
        'blink_me':lastCreatedTab && (tab.stoneName || tab.pairId) &&(tab.stoneName === lastCreatedTab || tab.pairId === lastCreatedTab)}">
            <a *ngIf="tab.name">
              <span *ngIf="tab.isActive; else notActiveTab">
                <label class="search-font-box thicker" id="{{tab.name}}NameId">{{tab.name}}
                  <span class="showtime">({{tab.modifiedDate | date: 'shortTime'}})</span>
                </label>
                <span *ngIf="searchResultCount > 1" class="icon-close circle-close-icon" id="{{tab.name}}RemoveIcon" (click)="removeSearchTab(tab.name, true)"></span>
              </span>
              <ng-template #notActiveTab>
                <label class="search-font-box"> R-{{tab.shortName}} </label>
              </ng-template>
            </a>
            <a *ngIf="tab.newSearch && visibleNewSearchTab">
              <label class="search-font-box">{{tab.newSearch | translate}}</label>
            </a>
            <a *ngIf="tab.stoneName" id="{{tab.stoneName}}NameLink">
              <span id="{{tab.stoneName}}NameId" class="search-font-box">{{tab.stoneName}} </span>
              <span id="removeIcon" class="icon-close circle-close-icon" (click)="removeSearchTab(tab.stoneName, false)"></span>
            </a>
            <a *ngIf="tab.pairId" id="{{tab.pairId}}NameLink">
              <span id="{{tab.pairId}}NameLink" class="search-font-box">{{tab.pairId}}</span>
              <span id="removeIcon" class="icon-close circle-close-icon" (click)="removeSearchTab(tab.pairId, false)"></span>
            </a>
          </li>
        </ul>
      </div>
    </div>

    <div class="tab-content">

      <div *ngIf="searchType === 'TWIN_DIAMOND_SEARCH'">
        <div *ngFor="let result of searchResults">
        <div *ngIf="result.name && currentTabSelected === result.name" id="{{result.name}}ID" class="tab-pane" [ngClass]="{'fade in active': currentTabSelected === result.name}">
          <div *ngIf="!result.isModified" [ngClass]="{'sms-page-container': !result.newSearch}">
            <div class="tabpanel-item" *ngIf="result.name">
              <div *ngIf="result.selectedStoneTable" id="{{result.id}}">
                <app-selected-stones-panel #selectedStonesPanel [searchType]="searchType" [resultArray]=result [showPacket]="visiblePacketIcon"
                  (stoneID)="removeTableStones($event)" [userSelectedColumn]="selectedColumnList" (toggleTableDisplay)="toggleSearchResultPanel($event)"
                  (stoneToAddPakcet)="stoneFromSelectedStone($event)" (updateArray)="updateStoneResultArray($event)"></app-selected-stones-panel>
              </div>

              <div class="ui-g-12 ui-g-nopad" style="position: relative" [hidden]="result.toggleTableDisplay">
                <div class="ui-g-12 color-lagend-panel ">
                  <div class="color-lagend-container">
                    <div class="color-lagend">
                      <div  class="box-color-lagend">
                        <span class="colorLagend_BTOB"></span>
                        <label>{{'Bid To Buy'|translate}}</label>
                      </div>
                      <div  class="box-color-lagend ">
                        <span class="colorLagend_BusinessProcess"></span>
                        <label>{{'Under Business Process'|translate}}</label>
                      </div>
                      <div  class="box-color-lagend">
                        <span class="colorLagend_NewArrival"></span>
                        <label>{{'New Arrival'|translate}}</label>
                      </div>
                      <div  class="box-color-lagend">
                        <span class="colorLagend_RecentlyUploded"></span>
                        <label>{{'Recently Uploaded'|translate}}</label>
                      </div>
                    </div>
                    <div class="color-lagend-icon">
                      <a>

                        <span id="download{{result.modifiedDate}}Search" class="grid-icon-top icon-download" [dirStoreAudit]="'EMAIL LIST'" (click)="showDowaloadOptions()"
                          pTooltip="{{'DOWNLOAD_TEXT' |translate}}" tooltipPosition="bottom" tooltipEvent="hover"> </span>

                      </a>
                      <a>
                        <span class="grid-icon-top icon-email" id="mail" (click)="sendExcelMail(result)" pTooltip="{{'MAIL_ME_TEXT'|translate}}"
                          tooltipPosition="bottom" tooltipEvent="hover"></span>
                      </a>
                      <a *ngIf="result.isEditable && result.searchFilterConfig">
                        <span [dirStoreAudit]="'MODIFY SEARCH'" id="filter" class="grid-icon-top icon-filter marl6 modify-search-icon" (click)="modifySearch(result.name)"
                          pTooltip="{{'Modify Search' |translate}}" tooltipPosition="bottom" tooltipEvent="hover"> </span>
                      </a>
                    </div>
                  </div>
                </div>
              </div>

              <div class="ui-g-12 ui-g-nopad grid-container fade" [hidden]="result.toggleTableDisplay" *ngIf="selectedColumnList && result.diamondTable ">

                <dx-data-grid #searchResultGridComponent id="{{result.name}}GridContainer" class="search-grid-container" [dataSource]=result.diamondTable
                  (onContentReady)="onResultLoading(result)" [allowColumnResizing]="true" [columnAutoWidth]="true" [hidden]="result.toggleTableDisplay"
                  [showColumnLines]="true" [showRowLines]="true" [allowColumnReordering]="true" [showBorders]="true" [rowAlternationEnabled]="false"
                  (onCellPrepared)="onCellPrepared($event,result)" [cacheEnabled]="true" [height]="gridHeight">
                  <dxo-column-chooser [enabled]="true"></dxo-column-chooser>
                  <dxo-column-fixing [enabled]="true"></dxo-column-fixing>
                  <dxo-scrolling mode="virtual" showScrollbar="always" useNative="false"></dxo-scrolling>
                  <dxo-load-panel [enabled]="true" indicatorSrc="./assets/img/srk-loading-logo.gif" text=""></dxo-load-panel>
                  <dxo-search-panel [visible]="true" placeholder="{{'Search'|translate}}"></dxo-search-panel>
                  <dxi-column caption="" [allowHiding]="false" [width]="30" dataType="string" [fixed]="true"  width="{{isColumnExpanded ? 275 : 130}}" [allowReordering]="false" [allowFiltering]="false"
                    [allowHeaderFiltering]="false" [allowResizing]="false" cellTemplate="checkboxTemplate" headerCellTemplate="selectAllCheckboxTemplate"
                    alignment="center"></dxi-column>
                  <div *dxTemplate="let data of 'selectAllCheckboxTemplate'">
                    <p-checkbox name="allSelectedParentTable" label="" id="{{result.name}}SelectALlId" binary="true" (onChange)="isAllStoneSelected(result, result.isAllResultSelected)"
                      [(ngModel)]="result.isAllResultSelected"></p-checkbox>
                  </div>
                  <div *dxTemplate="let data of 'selectAllCheckboxTemplate'">
                    <p-checkbox name="allSelectedParentTable" label="" id="{{result.name}}SelectALlId" binary="true" (onChange)="isAllStoneSelected(result, result.isAllResultSelected)"
                      [(ngModel)]="result.isAllResultSelected"></p-checkbox>
                  </div>
                  <dxi-column [allowHiding]="false" width="{{result.isColumnExpanded || isColumnExpanded ? 275 : 140}}" dataType="string" [fixed]="true" [allowReordering]="false"
                    [allowFiltering]="true" [allowSorting]="false" [allowHeaderFiltering]="true" [allowResizing]="false" cellTemplate="StoneIDTemplate"
                    headerCellTemplate="stoneDetailsHeaderTemplate" alignment="left"></dxi-column>

                  <dxi-column caption="Pair Id" [groupIndex]="(searchType == 'TWIN_DIAMOND_SEARCH') ? 0 :'undefined'" dataField="std_grp_no"
                    dataType="string" [visible]="searchType == 'TWIN_DIAMOND_SEARCH'" alignment="center"></dxi-column>
                  <dxi-column caption="Cert." [width]="allColumnWidth.cert" dataField="certificate.short_value" [visible]="selectedColumnList.Certificate.entity_value"
                    [visibleIndex]="selectedColumnList.Certificate.order" cellTemplate="viewCertificate" [allowFiltering]="true"
                    dataType="string" [allowHeaderFiltering]="true" alignment="center">
                  </dxi-column>
                  <div *dxTemplate="let data of 'viewCertificate'" class="CertIcon">
                    <a class="view-cert" tooltipPosition="bottom" tooltipEvent="hover" [dirStoneMultimediaDetail]="{stoneid:data.data,showMediaType:'PDF'}">{{data.data.certificate.short_value}}</a>
                  </div>
                  <dxi-column caption="Shape" dataField="shape.short_value" dataType="string" [width]="allColumnWidth.shape" [allowFiltering]="true"
                    [allowSorting]="true" [visibleIndex]="selectedColumnList.Shape.order" [allowHeaderFiltering]="true" alignment="center"></dxi-column>
                  <dxi-column caption="Clarity" dataField="clarity.short_value" dataType="string" [width]="allColumnWidth.clarity" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.Clarity.order" [visible]="selectedColumnList.Clarity.entity_value"
                    alignment="center"></dxi-column>
                  <dxi-column caption="Color" dataField="color.short_value" dataType="string" [width]="allColumnWidth.color" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.Colour.order" [visible]="selectedColumnList.Colour.entity_value"
                    alignment="center" cellTemplate="colorTemplate"></dxi-column>
                  <div *dxTemplate="let data of 'colorTemplate'">
                    <span class="color-ellipsis" *ngIf="data?.data?.color?.short_value?.length > 1;else showNormalBox" pTooltip={{data?.data?.color?.short_value}}
                      tooltipPosition="bottom" tooltipEvent="hover">{{data.data.color.short_value}}</span>
                    <ng-template #showNormalBox>{{data.data.color.short_value}}</ng-template>
                  </div>
                  <dxi-column caption="Carat" dataField="carat" dataType="string" [width]="allColumnWidth.carat" [allowFiltering]="true" [allowSorting]="true"
                    [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.Carat.order" [visible]="selectedColumnList.Carat.entity_value"
                    alignment="center"></dxi-column>
                  <dxi-column caption="$/ct." dataField="price_srk" dataType="number" [width]="allColumnWidth.dollarCt" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.DollarCT.order"
                    [visible]="selectedColumnList.DollarCT.entity_value" alignment="center" cellTemplate="dollarPerCarat">
                  </dxi-column>

                  <dxi-column caption="OFF%" dataField="rap_off" dataType="number" [width]="allColumnWidth.off" [allowFiltering]="true" [allowSorting]="true"
                    [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.Off.order" [visible]="selectedColumnList.Off.entity_value"
                    alignment="center">
                  </dxi-column>
                  <dxi-column caption="Amount" [width]="allColumnWidth.amount" [allowFiltering]="true" [allowHeaderFiltering]="true" cellTemplate="amount"
                    dataField="amount" [visibleIndex]="selectedColumnList.Amount.order" [visible]="selectedColumnList.Amount.entity_value"
                    dataType="number" [allowSorting]="true" alignment="center">
                  </dxi-column>

                  <dxi-column caption="Cut" dataField="cut.short_value" dataType="string" [width]="allColumnWidth.cut" [allowFiltering]="true"
                    [allowSorting]="true" [visibleIndex]="selectedColumnList.cut.order" [allowHeaderFiltering]="true" [visible]="selectedColumnList.cut.entity_value"
                    alignment="center">
                  </dxi-column>
                  <dxi-column caption="Pol" dataField="polish.short_value" dataType="string" [width]="allColumnWidth.pol" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.polish.order" [visible]="selectedColumnList.polish.entity_value"
                    alignment="center">
                  </dxi-column>
                  <dxi-column caption="Sym" dataField="symmetry.short_value" dataType="string" [width]="allColumnWidth.sym" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.symmetry.order"
                    [visible]="selectedColumnList.symmetry.entity_value" alignment="center">
                  </dxi-column>
                  <dxi-column caption="Fluor" dataField="fluor.short_value" dataType="string" [width]="allColumnWidth.fluor" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.fluorescence.order"
                    [visible]="selectedColumnList.fluorescence.entity_value" alignment="center">
                  </dxi-column>

                  <dxi-column caption="Measurement" dataField="measurement" dataType="string" [width]="allColumnWidth.measurement" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [allowReordering]="true" [visibleIndex]="selectedColumnList.Measurement.order"
                    [visible]="selectedColumnList.Measurement.entity_value" alignment="center"></dxi-column>
                  <dxi-column caption="D/R" dataField="ratio" dataType="string" [width]="allColumnWidth.dr" [allowFiltering]="true" [allowSorting]="true"
                    [allowHeaderFiltering]="true" [allowReordering]="true" [visibleIndex]="selectedColumnList.DR.order" [visible]="selectedColumnList.DR.entity_value"
                    alignment="center"></dxi-column>
                  <dxi-column caption="TAB" dataField="table_percent" dataType="string" [width]="allColumnWidth.tab" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [allowReordering]="true" [visibleIndex]="selectedColumnList.Tab.order"
                    [visible]="selectedColumnList.Tab.entity_value" alignment="center"></dxi-column>
                  <dxi-column caption="TD" dataField="total_depth_percent" dataType="string" [width]="allColumnWidth.td" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [allowReordering]="true" [visibleIndex]="selectedColumnList.Td.order"
                    [visible]="selectedColumnList.Td.entity_value" alignment="center"></dxi-column>

                  <dxi-column caption="Shd" dataField="shade.short_value" dataType="string" [width]="allColumnWidth.shd" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.shade.order" [visible]="selectedColumnList.shade.entity_value"
                    alignment="center"></dxi-column>
                  <dxi-column caption="Lust" dataField="luster.short_value" dataType="string" [width]="allColumnWidth.lus" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.luster.order" [visible]="selectedColumnList.luster.entity_value"
                    alignment="center"></dxi-column>

                  <dxi-column caption="TW" dataField="table_white.short_value" dataType="string" [width]="allColumnWidth.tw" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.table_white.order"
                    [visible]="selectedColumnList.table_white.entity_value" alignment="center"></dxi-column>
                  <dxi-column caption="SW" dataField="side_white.short_value" dataType="string" [width]="allColumnWidth.sw" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.side_white.order"
                    [visible]="selectedColumnList.side_white.entity_value" alignment="center"></dxi-column>

                  <dxi-column caption="TB" dataField="table_black.short_value" dataType="string" [width]="allColumnWidth.tb" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.table_black.order"
                    [visible]="selectedColumnList.table_black.entity_value" alignment="center"></dxi-column>
                  <dxi-column caption="SB" dataField="side_black.short_value" dataType="string" [width]="allColumnWidth.sb" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.side_black.order"
                    [visible]="selectedColumnList.side_black.entity_value" alignment="center"></dxi-column>

                  <dxi-column caption="SGS Comment" dataField="sgs" dataType="string" [width]="allColumnWidth.sgs" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" cellTemplate="SgsTemplate" [visibleIndex]="selectedColumnList.SGS.order"
                    [visible]="selectedColumnList.SGS.entity_value" alignment="left"></dxi-column>

                  <dxi-column caption="TS" dataField="table_spot.short_value" dataType="string" [width]="allColumnWidth.ts" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.table_spot.order"
                    [visible]="selectedColumnList.table_spot.entity_value" alignment="center"></dxi-column>
                  <dxi-column caption="SS" dataField="side_spot.short_value" dataType="string" [width]="allColumnWidth.ss" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.side_spot.order"
                    [visible]="selectedColumnList.side_spot.entity_value" alignment="center"></dxi-column>

                  <dxi-column caption="TO" dataField="table_open.short_value" dataType="string" [width]="allColumnWidth.to" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.table_open.order"
                    [visible]="selectedColumnList.table_open.entity_value" alignment="center"></dxi-column>
                  <dxi-column caption="CO" dataField="crown_open.short_value" dataType="string" [width]="allColumnWidth.co" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true " [visibleIndex]="selectedColumnList.crown_open.order"
                    [visible]="selectedColumnList.crown_open.entity_value" alignment="center"></dxi-column>
                  <dxi-column caption="PO" dataField="pav_open.short_value" dataType="string" [width]="allColumnWidth.po" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.pav_open.order"
                    [visible]="selectedColumnList.pav_open.entity_value" alignment="center"></dxi-column>
                  <dxi-column caption="GO" dataField="girdle_open.short_value" dataType="string" [width]="allColumnWidth.go" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.girdle_open.order"
                    [visible]="selectedColumnList.girdle_open.entity_value" alignment="center"></dxi-column>


                  <dxi-column caption="T EF" dataField="table_extra_facet.short_value" dataType="string" [width]="allColumnWidth.tef" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.table_EF.order"
                    [visible]="selectedColumnList.table_EF.entity_value" alignment="center"></dxi-column>
                  <dxi-column caption="C EF" dataField="crown_extra_facet.short_value" dataType="string" [width]="allColumnWidth.cef" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.crown_EF.order"
                    [visible]="selectedColumnList.crown_EF.entity_value" alignment="center"></dxi-column>
                  <dxi-column caption="P EF" dataField="pav_extra_facet.short_value" dataType="string" [width]="allColumnWidth.pef" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.pav_EF.order" [visible]="selectedColumnList.pav_EF.entity_value"
                    alignment="center"></dxi-column>

                  <dxi-column caption="Key To Symbol" dataType="string" dataField="kts" [width]="allColumnWidth.kts" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.Key_To_Symbol.order"
                    [visible]="selectedColumnList.Key_To_Symbol.entity_value" alignment="left"></dxi-column>
                  <dxi-column caption="Lab Comments" dataType="string" dataField="lab_comment" [width]="allColumnWidth.lab" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.Lab_Comments.order"
                    [visible]="selectedColumnList.Lab_Comments.entity_value" alignment="left"></dxi-column>
                  <dxi-column caption="Girdle %" dataType="string" dataField="girdle_percent" [width]="allColumnWidth.girdle" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.GirdlePer.order"
                    [visible]="selectedColumnList.GirdlePer.entity_value" alignment="center"></dxi-column>
                  <dxi-column caption="H&A" dataType="string" dataField="hna.short_value" [width]="allColumnWidth.ha" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.HandA.order" [visible]="selectedColumnList.HandA.entity_value"
                    alignment="center"></dxi-column>
                  <dxi-column caption="CertNo" dataType="string" dataField="certificate_no" [width]="allColumnWidth.certNo" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.Certificate_No.order"
                    [visible]="selectedColumnList.Certificate_No.entity_value" alignment="center">

                  </dxi-column>


                  <dxi-column caption="Rap $/ct." dataType="string" dataField="price_rap" [width]="allColumnWidth.rap" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.Rap_Dollar_CT.order"
                    [visible]="selectedColumnList.Rap_Dollar_CT.entity_value" alignment="center"></dxi-column>
                  <dxi-column caption="Eligible" dataType="string" dataField="eligibility" [width]="allColumnWidth.eligible" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.Eligible.order"
                    [visible]="selectedColumnList.Eligible.entity_value" alignment="center"></dxi-column>

                  <div *dxTemplate="let data of 'dollarPerCarat'">
                    {{data.data.price_srk | number:'1.2-2'}}
                  </div>
                  <div *dxTemplate="let data of 'amount'">
                    {{data.data.amount | number:'1.2-2'}}
                  </div>

                  <div *dxTemplate="let data of 'stoneDetailsHeaderTemplate'">
                    <label class="fl">Diamond Details</label>
                    <div *ngIf="!isColumnExpanded" id="NavigationRight" class="custom-button" (click)="scrollColumn(result.name, result)"
                      pTooltip="{{'EXPAND_DETAILS_TEXT' |translate}}" tooltipPosition="bottom" tooltipEvent="hover">></div>
                    <div *ngIf="isColumnExpanded" id="NavigationLeft" class="custom-button" (click)="scrollColumn(result.name, result)"
                      pTooltip="{{'COLLAPSE_DETAILS_TEXT' |translate}}" tooltipPosition="bottom" tooltipEvent="hover">
                      <</div>
                    </div>

                    <div *dxTemplate="let data of 'checkboxTemplate'">
                      <p-checkbox id="{{data.data.stone_id}}_{{result.name}}Id" name="searchTable" label="" value="{{data.data.stone_id}}" (onChange)="stoneSelected(result, {stoneId: data.data.stone_id, added: $event})"
                        [(ngModel)]="result.selectedStoneButton"></p-checkbox>
                    </div>

                    <div *dxTemplate="let data of 'checkboxTemplate'">
                      <p-checkbox id="{{data.data.stone_id}}_{{result.name}}Id" name="searchTable" label="" value="{{data.data.stone_id}}" (onChange)="stoneSelected(result, {stoneId: data.data.stone_id, added: $event})"
                        [(ngModel)]="result.selectedStoneButton"></p-checkbox>
                    </div>

                    <div *dxTemplate="let data of 'StoneIDTemplate'">

                      <span class="grid-icon-container" *ngIf="visiblePacketIcon">

                        <a [dirStoreAudit]="'ADD TO PACKET'" *ngIf="data.data.packet_count>0; else notInPacket">
                          <span id="{{data.data.stone_id}}{{result.name}}PktId" class="grid-icon icon-packet-added text-green" (click)="stoneToOperateInPacket(data.data)"
                            pTooltip="{{'Select Packet'|translate}}" tooltipPosition="bottom" tooltipEvent="hover"></span>
                        </a>
                        <ng-template #notInPacket>
                          <a [dirStoreAudit]="'ADD TO PACKET'">
                            <span id="{{data.data.stone_id}}{{result.name}}PktId" class="grid-icon icon-packet-add" (click)="stoneToOperateInPacket(data.data)"
                              pTooltip="{{'Select Packet'|translate}}" tooltipPosition="bottom" tooltipEvent="hover"></span>
                          </a>
                        </ng-template>
                      </span>
                      <span class="grid-icon-container">
                        <a (click)="showStoneMediaIconsPanel(data.data,$event,thmMediaIcon)">
                          <span id="{{data.data.stone_id}}{{result.name}}ViewId" class="grid-icon icon-media"></span>
                        </a>
                      </span>
                      <span class="grid-icon-container-stoneid">
                        <a [dirStoreAudit]="'STONE DETAIL VIEW'" id="{{data.data.stone_id}}{{result.name}}StoneId" (click)="getPageRef(result);addStoneInfoTab(data.data, result)">{{data.data.stone_id}}</a>
                       </span>
                      <span class="grid-icon-container" *ngIf="data.data.isTwin && isIconVisible">
                        <a [dirStoreAudit]="'STD DETAIL VIEW'" id="{{data.data.stone_id}}{{result.name}}StoneId" [dirCustomEventAccessHandler]="'twin_diamond_detail_view'"
                          (customEvent)="getPageRef(result);addTwinStoneInfoTab(data.data.std_grp_no, searchResults, result)">
                          <span id="{{data.data.stone_id}}{{result.name}}STDId" pTooltip="{{'TWIN_DIAMOND_DETAIL_TEXT' |translate}}" tooltipPosition="bottom"
                            tooltipEvent="hover" class=" icon-Twin-Shape-Round "></span>
                        </a>
                      </span>
                      <span class="grid-icon-container mart0" *ngIf="(data.data.totalViewed > -1  && !(data.data.totalViewed === 0 && data.data.totalViewedByUser === 0)) && isIconVisible">
                        <div class="icon-with-text">
                          <span id="{{data.data.stone_id}}{{result.name}}TotViewId" class="grid-icon icon-online-view"> </span>
                          <br>
                          <label>
                            <span pTooltip="{{'OTHERS_VIEW_TEXT'|translate}}" tooltipPosition="bottom" tooltipEvent="hover">{{data.data.totalViewed}}</span>
                            <span *ngIf="data.data.totalViewedByUser > -1" pTooltip="{{'MY_VIEW_TEXT'|translate}}" tooltipPosition="bottom" tooltipEvent="hover">/{{data.data.totalViewedByUser}}</span>
                          </label>
                        </div>
                      </span>
                      <span class="grid-icon-container mart0" *ngIf="data.data.totalViewRequest && isIconVisible">
                        <div class="icon-with-text">
                          <span id="{{data.data.stone_id}}{{result.name}}ViewReqId" class="grid-icon icon-my-view" pTooltip="{{(data.data.viewRequestStatus=== 2?'ALREADY_VIEWED_TEXT':'VIEW_REQUEST_TEXT') |translate}}"
                            tooltipPosition="bottom" tooltipEvent="hover" [ngClass]="{'text-red': data.data.viewRequestStatus=== 2}">
                          </span>
                          <br>
                          <label *ngIf="data.data.totalViewRequest > 1">
                            {{data.data.totalViewRequest}}</label>
                        </div>
                      </span>
                      <span class="grid-icon-container" *ngIf="data.data.isRecommended && isIconVisible">
                        <span id="{{data.data.stone_id}}{{result.name}}RecommendedId" pTooltip="{{'Recommended Stone'|translate}}" tooltipPosition="bottom" tooltipEvent="hover" class="grid-icon srk-recommend"></span>
                      </span>
                      <span class="grid-icon-container" *ngIf="data.data.isOnHold && isIconVisible">
                        <span id="{{data.data.stone_id}}{{result.name}}holdId" class="grid-icon icon-hold-list-option-2"></span>

                      </span>
                      <span class="grid-icon-container" *ngIf="data.data.isBasket && isIconVisible">
                        <span id="{{data.data.stone_id}}{{result.name}}CartId" pTooltip="{{(data.data.basketStatus==='<'?'BASKET_PRICE_REVISED_TEXT':'BASKET_TEXT') |translate}}"
                          tooltipPosition="bottom" tooltipEvent="hover" class="grid-icon icon-cart" [ngClass]="{ 'text-red': data.data.basketStatus==='<'}"></span>
                      </span>
                      <span class="grid-icon-container" *ngIf="data.data.b2b_state === 1 && isIconVisible">
                        <a (click)="openBTB(data.data)">
                          <span id="{{data.data.stone_id}}{{result.name}}B2BId" pTooltip="{{(data.data.isBtbUpdated === 1?'BID_SAVED':(data.data.isBtbUpdated === 2?'FINAL_SUBMITTED':'B2B_ACTIVE'))|translate}}"
                            tooltipPosition="bottom" tooltipEvent="hover" class="grid-icon icon-b2b" [ngClass]="{'text-red': data.data.isBtbUpdated === 1, 'text-green': data.data.isBtbUpdated === 2}">
                          </span>
                        </a>
                      </span>
                      <span class="grid-icon-container" *ngIf="data.data.showHoldIcon && isIconVisible">
                          <span *ngIf="data.data.showHoldIcon" id="{{data.data.stone_id}}showHoldIcon" pTooltip="{{'HOLD_ICON_DETAIL_TEXT'|translate}}" tooltipPosition="bottom" class="grid-icon icon-hold-list-option-2"></span>
                      </span>

                      <ng-template [dirCheckPermission]="'ddc_btn'">
                        <span class="grid-icon-container" *ngIf="data.data.business_process && isIconVisible">
                          <a (click)="updateDDC(data.data)">
                            <span pTooltip="{{(data.data.ddcStatus==='ACTIVE'?'DDC_ACTIVE':(data.data.ddcStatus==='INACTIVE'?'DDC_INACTIVE':'DDC_PUT')) |translate}}"
                              tooltipPosition="bottom" tooltipEvent="hover" id="{{data.data.stone_id}}{{result.name}}DDCId"
                              class="grid-icon icon-ddc" [ngClass]="{'text-green': data.data.ddcStatus==='ACTIVE' , 'text-red': data.data.ddcStatus==='INACTIVE'}">
                            </span>
                          </a>
                        </span>
                      </ng-template>

                      <span class="grid-icon-container mart0" *ngIf="data.data.haveNote && isIconVisible">
                        <a>
                          <span id="{{data.data.stone_id}}notes" pTooltip="{{'NOTE'|translate}}" tooltipPosition="bottom" tooltipEvent="hover" class="grid-icon icon-note"
                            (click)="showAllCommentsForStone(data.data.notes)"></span>
                          <br>
                          <span *ngIf="data.data.haveNote" id="{{data.data.stone_id}}notesCount" class="note" (click)="showAllCommentsForStone(data.data.notes)">{{data.data.totalNotes}}
                          </span>
                        </a>
                      </span>
                      <span class="grid-icon-container" *ngIf="data.data.countryCode && isIconVisible">
                        <img id="{{data.data.stone_id}}Flag" class="stone-flag-icon" [src]=data.data.countryCode pTooltip={{data.data.tooltipMessage}}
                          tooltipPosition="bottom" tooltipEvent="hover">
                      </span>
                      <span *ngIf="data.data.color_legends" class="color-right color-legend-box" [ngClass]="{'show-packet-legend': visiblePacketIcon , 'twin-legend-panel': searchType == 'TWIN_DIAMOND_SEARCH', 'twin-legend-panel-packet':searchType == 'TWIN_DIAMOND_SEARCH' && visiblePacketIcon}">
                        <div id="{{data.data.stone_id}}{{result.name}}ColorId" class="color-indicator-panel" *ngFor="let color of data.data.color_legends">
                          <div id="{{data.data.stone_id}}{{result.name}}{{color}}Id" class="colorLagend_GRID" [ngClass]="{'color-legend-width-height':  result.isColumnExpanded === false, 'color-legend-height-width':  result.isColumnExpanded === true}"
                            [style.background-color]="color | safeStyle"></div>
                        </div>
                      </span>
                    </div>

                    <div *dxTemplate="let data of 'SgsTemplate'">
                      <span>{{data.data.sgs.toString()}}</span>
                    </div>

                </dx-data-grid>

                <!--<app-infra-grid [(tableData)]="result.diamondTable" [widthInfo]="allColumnWidth" [gridHeight]="gridHeight" (stoneDetailInNewTab)="openStoneInNewTabTrigger($event, result.diamondTable)"
                    (allRowsSelected)="isAllStoneSelected(result, $event)" (singleRowSelected)="stoneSelected(result, $event)" (twinDiamondDetailInNewTab)="addTwinStoneInfoTab($event, searchResults, result)"
                    (updateDDCClicked)="updateDDC($event)" [gridName]="result.shortName" >
                </app-infra-grid>-->

              </div>


              </div>
              <dx-popover target="#download{{result.modifiedDate}}Search" position="bottom" [width]="141" [(visible)]="downloadPopOverVisible">
                <div *dxTemplate="let data of 'content'">
                  <p-listbox [options]="downloadOptions" [(ngModel)]="selectedDownloadType" [style]="{'max-height':'250px'  , 'max-width':'100%'}"
                    (onChange)="downloadResult(result)">
                    <ng-template let-opt pTemplate="item">
                      <div class="ui-helper-clearfix">
                        <span style="font-size: 14px; margin: 15px 10px 0 0">{{opt.label}}</span>
                      </div>
                    </ng-template>
                  </p-listbox>
                </div>
              </dx-popover>
            </div>
          </div>
          <div *ngIf="result.isModified">
            <app-specific-search [modifiySearchData]="result.searchFilterConfig" [searchFiltersValue]="result.searchFiltersValue" [showCancelBtn]="result.isModified"
              (modify)="createModifiedSearchResult($event)" (cancelSearch)="cancelModifySearch($event,result)"></app-specific-search>
          </div>

          <!-- NEW SEARCH -->
          <div *ngIf="result.newSearch && visibleNewSearchTab && currentTabSelected === result.newSearch" id="{{result.newSearch}}ID"
            class="tab-pane" [ngClass]="{'fade in active': currentTabSelected === result.newSearch}">
            <app-specific-search (newSearch)="createNewSearchResult($event)"></app-specific-search>
          </div>

          <!-- STONE DETAILS PAGE -->
          <div *ngIf="result.stoneName && currentTabSelected === result.stoneName" id="{{result.stoneName}}ID" class="tab-pane" [ngClass]="{'fade in active': currentTabSelected === result.stoneName}"
            [hidden]="currentTabSelected !== result.stoneName">
            <div id="stonedetailssearch" class="ui-g-12 struck-details-page sms-page-container">
              <thm-stone-details [stoneDetails]="result.stoneInfo"></thm-stone-details>
            </div>
          </div>

          <!-- TWIN STONE DETAILS PAGE -->
          <div *ngIf="result.pairId && currentTabSelected === result.pairId" id="{{result.pairId}}ID" class="tab-pane" [ngClass]="{'fade in active': currentTabSelected === result.pairId}"
            [hidden]="currentTabSelected !== result.pairId">
            <div class="ui-g-12 struck-details-page rmheight sms-page-container">
              <thm-twin-stone-detail [twinStones]="result.twinStones"></thm-twin-stone-detail>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="searchType === 'GENERAL_SEARCH'">
        <div *ngFor="let result of searchResults">
        <div *ngIf="result.name && currentTabSelected === result.name" id="{{result.name}}ID" class="tab-pane" [ngClass]="{'fade in active': currentTabSelected === result.name}">
          <div *ngIf="!result.isModified" [ngClass]="{'sms-page-container': !result.newSearch}">
            <div class="tabpanel-item" *ngIf="result.name">
              <div *ngIf="result.selectedStoneTable" id="{{result.id}}">
                <app-selected-stones-panel #selectedStonesPanel [searchType]="searchType" [resultArray]="result" [selectionArray]="result.selectedStoneTable"
                                           [showPacket]="visiblePacketIcon" (stoneID)="removeTableStones($event)"
                                           [userSelectedColumn]="selectedColumnList" (toggleTableDisplay)="toggleSearchResultPanel($event)"
                                           (stoneToAddPakcet)="stoneFromSelectedStone($event)" (updateArray)="updateStoneResultArray($event)"
                                           (basketAddedEventForGrid)="handleBasketEventForGrid($event)" [stonesActedOn]="stonesActedOn">
                </app-selected-stones-panel>
              </div>

              <div class="ui-g-12 ui-g-nopad" style="position: relative" [hidden]="result.toggleTableDisplay">
                <div class="ui-g-12 color-lagend-panel ">
                  <div class="color-lagend-container">
                    <div class="color-lagend">
                      <div (click)="setColorLegendFilterValue($event, 'bidToBuy')" [ngClass]="{'border-active-highlight':colorLegendFilterValue.indexOf('bidToBuy') > -1}" class="box-color-lagend">
                        <span class="colorLagend_BTOB"></span>
                        <label>{{'Bid To Buy'|translate}}</label>
                      </div>
                      <div (click)="setColorLegendFilterValue($event, 'underBusinessProcess')" [ngClass]="{'border-active-highlight':colorLegendFilterValue.indexOf('underBusinessProcess') > -1}" class="box-color-lagend ">
                        <span class="colorLagend_BusinessProcess"></span>
                        <label>{{'Under Business Process'|translate}}</label>
                      </div>
                      <div (click)="setColorLegendFilterValue($event, 'newArrival')" [ngClass]="{'border-active-highlight':colorLegendFilterValue.indexOf('newArrival') > -1}" class="box-color-lagend">
                        <span class="colorLagend_NewArrival"></span>
                        <label>{{'New Arrival'|translate}}</label>
                      </div>
                      <div (click)="setColorLegendFilterValue($event, 'recentlyUploaded')" [ngClass]="{'border-active-highlight':colorLegendFilterValue.indexOf('recentlyUploaded') > -1}" class="box-color-lagend">
                        <span class="colorLagend_RecentlyUploded"></span>
                        <label>{{'Recently Uploaded'|translate}}</label>
                      </div>
                    </div>
                    <div class="color-lagend-icon">
                      <a>

                        <span id="download{{result.modifiedDate}}Search" class="grid-icon-top icon-download" [dirStoreAudit]="'EMAIL LIST'" (click)="showDowaloadOptions()"
                              pTooltip="{{'DOWNLOAD_TEXT' |translate}}" tooltipPosition="bottom" tooltipEvent="hover"> </span>

                      </a>
                      <a>
                        <span class="grid-icon-top icon-email" id="mail" (click)="sendExcelMail(result)" pTooltip="{{'MAIL_ME_TEXT'|translate}}"
                              tooltipPosition="bottom" tooltipEvent="hover"></span>
                      </a>
                      <a *ngIf="result.isEditable && result.searchFilterConfig">
                        <i [dirStoreAudit]="'MODIFY SEARCH'" id="filter" style="padding:5px; border: 3px white white; " class="grid-icon-top icon-filter marl6" (click)="modifySearch(result.name)"
                              pTooltip="{{'Modify Search' |translate}}" tooltipPosition="bottom" tooltipEvent="hover"> </i>
                      </a>
                    </div>
                  </div>
                </div>
              </div>

              <div class="ui-g-12 ui-g-nopad grid-container fade" [hidden]="result.toggleTableDisplay" *ngIf="selectedColumnList && result.diamondTable ">

                <!--<dx-data-grid #searchResultGridComponent id="{{result.name}}GridContainer" class="search-grid-container" [dataSource]=result.diamondTable
                  (onContentReady)="onResultLoading(result)" [allowColumnResizing]="true" [columnAutoWidth]="true" [hidden]="result.toggleTableDisplay"
                  [showColumnLines]="true" [showRowLines]="true" [allowColumnReordering]="true" [showBorders]="true" [rowAlternationEnabled]="false"
                  (onCellPrepared)="onCellPrepared($event,result)" [cacheEnabled]="true" [height]="gridHeight">
                  <dxo-column-chooser [enabled]="true"></dxo-column-chooser>
                  <dxo-column-fixing [enabled]="true"></dxo-column-fixing>
                  <dxo-scrolling mode="virtual" showScrollbar="always" useNative="false"></dxo-scrolling>
                  <dxo-load-panel [enabled]="true"></dxo-load-panel>
                  <dxo-search-panel [visible]="true" placeholder="{{'Search'|translate}}"></dxo-search-panel>
                  <dxi-column caption="" [allowHiding]="false" [width]="30" dataType="string" [fixed]="true" [allowReordering]="false" [allowFiltering]="false"
                    [allowHeaderFiltering]="false" [allowResizing]="false" cellTemplate="checkboxTemplate" headerCellTemplate="selectAllCheckboxTemplate"
                    alignment="center"></dxi-column>
                  <div *dxTemplate="let data of 'selectAllCheckboxTemplate'">
                    <p-checkbox name="allSelectedParentTable" label="" id="{{result.name}}SelectALlId" binary="true" (onChange)="isAllStoneSelected(result)"
                      [(ngModel)]="result.isAllResultSelected"></p-checkbox>
                  </div>
                  <dxi-column [allowHiding]="false" width="{{result.isColumnExpanded ? 275 : 140}}" dataType="string" [fixed]="true" [allowReordering]="false"
                    [allowFiltering]="true" [allowSorting]="false" [allowHeaderFiltering]="true" [allowResizing]="false" cellTemplate="StoneIDTemplate"
                    headerCellTemplate="stoneDetailsHeaderTemplate" alignment="left"></dxi-column>

                  <dxi-column caption="Pair Id" [groupIndex]="(searchType == 'TWIN_DIAMOND_SEARCH') ? 0 :'undefined'" dataField="std_grp_no"
                    dataType="string" [visible]="searchType == 'TWIN_DIAMOND_SEARCH'" alignment="center"></dxi-column>
                  <dxi-column caption="Cert." [width]="allColumnWidth.cert" dataField="certificate.short_value" [visible]="selectedColumnList.Certificate.entity_value"
                    [visibleIndex]="selectedColumnList.Certificate.order" [allowFiltering]="true" dataType="string" [allowHeaderFiltering]="true"
                    alignment="center"></dxi-column>
                  <dxi-column caption="Shape" dataField="shape.short_value" dataType="string" [width]="allColumnWidth.shape" [allowFiltering]="true"
                    [allowSorting]="true" [visibleIndex]="selectedColumnList.Shape.order" [allowHeaderFiltering]="true" alignment="center"></dxi-column>
                  <dxi-column caption="Clarity" dataField="clarity.short_value" dataType="string" [width]="allColumnWidth.clarity" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.Clarity.order" [visible]="selectedColumnList.Clarity.entity_value"
                    alignment="center"></dxi-column>
                  <dxi-column caption="Color" dataField="color.short_value" dataType="string" [width]="allColumnWidth.color" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.Colour.order" [visible]="selectedColumnList.Colour.entity_value"
                    alignment="center" cellTemplate="colorTemplate"></dxi-column>
                  <div *dxTemplate="let data of 'colorTemplate'">
                    <span class="color-ellipsis" *ngIf="data?.data?.color?.short_value?.length > 1;else showNormalBox" pTooltip={{data?.data?.color?.short_value}}
                      tooltipPosition="bottom" tooltipEvent="hover">{{data.data.color.short_value}}</span>
                    <ng-template #showNormalBox>{{data.data.color.short_value}}</ng-template>
                  </div>
                  <dxi-column caption="Carat" dataField="carat" dataType="string" [width]="allColumnWidth.carat" [allowFiltering]="true" [allowSorting]="true"
                    [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.Carat.order" [visible]="selectedColumnList.Carat.entity_value"
                    alignment="center"></dxi-column>
                  <dxi-column caption="$/ct." dataField="price_srk" dataType="number" [width]="allColumnWidth.dollarCt" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.DollarCT.order"
                    [visible]="selectedColumnList.DollarCT.entity_value" alignment="center" cellTemplate="dollarPerCarat">
                  </dxi-column>

                  <dxi-column caption="OFF%" dataField="rap_off" dataType="number" [width]="allColumnWidth.off" [allowFiltering]="true" [allowSorting]="true"
                    [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.Off.order" [visible]="selectedColumnList.Off.entity_value"
                    alignment="center">
                  </dxi-column>
                  <dxi-column caption="Amount" [width]="allColumnWidth.amount" [allowFiltering]="true" [allowHeaderFiltering]="true" cellTemplate="amount"
                    dataField="amount" [visibleIndex]="selectedColumnList.Amount.order" [visible]="selectedColumnList.Amount.entity_value"
                    dataType="number" [allowSorting]="true" alignment="center">
                  </dxi-column>

                  <dxi-column caption="Cut" dataField="cut.short_value" dataType="string" [width]="allColumnWidth.cut" [allowFiltering]="true"
                    [allowSorting]="true" [visibleIndex]="selectedColumnList.cut.order" [allowHeaderFiltering]="true" [visible]="selectedColumnList.cut.entity_value"
                    alignment="center">
                  </dxi-column>
                  <dxi-column caption="Pol" dataField="polish.short_value" dataType="string" [width]="allColumnWidth.pol" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.polish.order" [visible]="selectedColumnList.polish.entity_value"
                    alignment="center">
                  </dxi-column>
                  <dxi-column caption="Sym" dataField="symmetry.short_value" dataType="string" [width]="allColumnWidth.sym" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.symmetry.order"
                    [visible]="selectedColumnList.symmetry.entity_value" alignment="center">
                  </dxi-column>
                  <dxi-column caption="Fluor" dataField="fluor.short_value" dataType="string" [width]="allColumnWidth.fluor" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.fluorescence.order"
                    [visible]="selectedColumnList.fluorescence.entity_value" alignment="center">
                  </dxi-column>

                  <dxi-column caption="Measurement" dataField="measurement" dataType="string" [width]="allColumnWidth.measurement" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [allowReordering]="true" [visibleIndex]="selectedColumnList.Measurement.order"
                    [visible]="selectedColumnList.Measurement.entity_value" alignment="center"></dxi-column>
                  <dxi-column caption="D/R" dataField="ratio" dataType="string" [width]="allColumnWidth.dr" [allowFiltering]="true" [allowSorting]="true"
                    [allowHeaderFiltering]="true" [allowReordering]="true" [visibleIndex]="selectedColumnList.DR.order" [visible]="selectedColumnList.DR.entity_value"
                    alignment="center"></dxi-column>
                  <dxi-column caption="TAB" dataField="table_percent" dataType="string" [width]="allColumnWidth.tab" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [allowReordering]="true" [visibleIndex]="selectedColumnList.Tab.order"
                    [visible]="selectedColumnList.Tab.entity_value" alignment="center"></dxi-column>
                  <dxi-column caption="TD" dataField="total_depth_percent" dataType="string" [width]="allColumnWidth.td" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [allowReordering]="true" [visibleIndex]="selectedColumnList.Td.order"
                    [visible]="selectedColumnList.Td.entity_value" alignment="center"></dxi-column>

                  <dxi-column caption="Shd" dataField="shade.short_value" dataType="string" [width]="allColumnWidth.shd" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.shade.order" [visible]="selectedColumnList.shade.entity_value"
                    alignment="center"></dxi-column>
                  <dxi-column caption="Lust" dataField="luster.short_value" dataType="string" [width]="allColumnWidth.lus" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.luster.order" [visible]="selectedColumnList.luster.entity_value"
                    alignment="center"></dxi-column>

                  <dxi-column caption="TW" dataField="table_white.short_value" dataType="string" [width]="allColumnWidth.tw" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.table_white.order"
                    [visible]="selectedColumnList.table_white.entity_value" alignment="center"></dxi-column>
                  <dxi-column caption="SW" dataField="side_white.short_value" dataType="string" [width]="allColumnWidth.sw" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.side_white.order"
                    [visible]="selectedColumnList.side_white.entity_value" alignment="center"></dxi-column>

                  <dxi-column caption="TB" dataField="table_black.short_value" dataType="string" [width]="allColumnWidth.tb" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.table_black.order"
                    [visible]="selectedColumnList.table_black.entity_value" alignment="center"></dxi-column>
                  <dxi-column caption="SB" dataField="side_black.short_value" dataType="string" [width]="allColumnWidth.sb" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.side_black.order"
                    [visible]="selectedColumnList.side_black.entity_value" alignment="center"></dxi-column>

                  <dxi-column caption="SGS Comment" dataField="sgs" dataType="string" [width]="allColumnWidth.sgs" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" cellTemplate="SgsTemplate" [visibleIndex]="selectedColumnList.SGS.order"
                    [visible]="selectedColumnList.SGS.entity_value" alignment="left"></dxi-column>

                  <dxi-column caption="TS" dataField="table_spot.short_value" dataType="string" [width]="allColumnWidth.ts" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.table_spot.order"
                    [visible]="selectedColumnList.table_spot.entity_value" alignment="center"></dxi-column>
                  <dxi-column caption="SS" dataField="side_spot.short_value" dataType="string" [width]="allColumnWidth.ss" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.side_spot.order"
                    [visible]="selectedColumnList.side_spot.entity_value" alignment="center"></dxi-column>

                  <dxi-column caption="TO" dataField="table_open.short_value" dataType="string" [width]="allColumnWidth.to" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.table_open.order"
                    [visible]="selectedColumnList.table_open.entity_value" alignment="center"></dxi-column>
                  <dxi-column caption="CO" dataField="crown_open.short_value" dataType="string" [width]="allColumnWidth.co" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true " [visibleIndex]="selectedColumnList.crown_open.order"
                    [visible]="selectedColumnList.crown_open.entity_value" alignment="center"></dxi-column>
                  <dxi-column caption="PO" dataField="pav_open.short_value" dataType="string" [width]="allColumnWidth.po" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.pav_open.order"
                    [visible]="selectedColumnList.pav_open.entity_value" alignment="center"></dxi-column>
                  <dxi-column caption="GO" dataField="girdle_open.short_value" dataType="string" [width]="allColumnWidth.go" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.girdle_open.order"
                    [visible]="selectedColumnList.girdle_open.entity_value" alignment="center"></dxi-column>


                  <dxi-column caption="T EF" dataField="table_extra_facet.short_value" dataType="string" [width]="allColumnWidth.tef" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.table_EF.order"
                    [visible]="selectedColumnList.table_EF.entity_value" alignment="center"></dxi-column>
                  <dxi-column caption="C EF" dataField="crown_extra_facet.short_value" dataType="string" [width]="allColumnWidth.cef" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.crown_EF.order"
                    [visible]="selectedColumnList.crown_EF.entity_value" alignment="center"></dxi-column>
                  <dxi-column caption="P EF" dataField="pav_extra_facet.short_value" dataType="string" [width]="allColumnWidth.pef" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.pav_EF.order" [visible]="selectedColumnList.pav_EF.entity_value"
                    alignment="center"></dxi-column>

                  <dxi-column caption="Key To Symbol" dataType="string" dataField="kts" [width]="allColumnWidth.kts" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.Key_To_Symbol.order"
                    [visible]="selectedColumnList.Key_To_Symbol.entity_value" alignment="left"></dxi-column>
                  <dxi-column caption="Lab Comments" dataType="string" dataField="lab_comment" [width]="allColumnWidth.lab" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.Lab_Comments.order"
                    [visible]="selectedColumnList.Lab_Comments.entity_value" alignment="left"></dxi-column>
                  <dxi-column caption="Girdle %" dataType="string" dataField="girdle_percent" [width]="allColumnWidth.girdle" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.GirdlePer.order"
                    [visible]="selectedColumnList.GirdlePer.entity_value" alignment="center"></dxi-column>
                  <dxi-column caption="H&A" dataType="string" dataField="hna.short_value" [width]="allColumnWidth.ha" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.HandA.order" [visible]="selectedColumnList.HandA.entity_value"
                    alignment="center"></dxi-column>
                  <dxi-column caption="CertNo" dataType="string" dataField="certificate_no" [width]="allColumnWidth.certNo" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.Certificate_No.order"
                    [visible]="selectedColumnList.Certificate_No.entity_value" alignment="center"></dxi-column>
                  <dxi-column caption="Rap $/ct." dataType="string" dataField="price_rap" [width]="allColumnWidth.rap" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.Rap_Dollar_CT.order"
                    [visible]="selectedColumnList.Rap_Dollar_CT.entity_value" alignment="center"></dxi-column>
                  <dxi-column caption="Eligible" dataType="string" dataField="eligibility" [width]="allColumnWidth.eligible" [allowFiltering]="true"
                    [allowSorting]="true" [allowHeaderFiltering]="true" [visibleIndex]="selectedColumnList.Eligible.order"
                    [visible]="selectedColumnList.Eligible.entity_value" alignment="center"></dxi-column>

                  <div *dxTemplate="let data of 'dollarPerCarat'">
                    {{data.data.price_srk | number:'1.2-2'}}
                  </div>
                  <div *dxTemplate="let data of 'amount'">
                    {{data.data.amount | number:'1.2-2'}}
                  </div>

                  <div *dxTemplate="let data of 'stoneDetailsHeaderTemplate'">
                    <label class="fl">Diamond Details</label>
                    <div *ngIf="!result.isColumnExpanded" id="NavigationRight" class="custom-button" (click)="scrollColumn(result.name, result)"
                      pTooltip="{{'EXPAND_DETAILS_TEXT' |translate}}" tooltipPosition="bottom" tooltipEvent="hover">></div>
                    <div *ngIf="result.isColumnExpanded" id="NavigationLeft" class="custom-button" (click)="scrollColumn(result.name, result)"
                      pTooltip="{{'COLLAPSE_DETAILS_TEXT' |translate}}" tooltipPosition="bottom" tooltipEvent="hover">
                      <</div>
                    </div>

                    <div *dxTemplate="let data of 'checkboxTemplate'">
                      <p-checkbox id="{{data.data.stone_id}}_{{result.name}}Id" name="searchTable" label="" value="{{data.data.stone_id}}" (onChange)="stoneSelected(result, data.data.stone_id)"
                        [(ngModel)]="result.selectedStoneButton"></p-checkbox>
                    </div>

                    <div *dxTemplate="let data of 'StoneIDTemplate'">

                      <span class="grid-icon-container" *ngIf="visiblePacketIcon">

                        <a [dirStoreAudit]="'ADD TO PACKET'" *ngIf="data.data.packet_count>0; else notInPacket">
                          <span id="{{data.data.stone_id}}{{result.name}}PktId" class="grid-icon icon-packet-added text-green" (click)="stoneToOperateInPacket(data.data)"
                            pTooltip="{{'Select Packet'|translate}}" tooltipPosition="bottom" tooltipEvent="hover"></span>
                        </a>
                        <ng-template #notInPacket>
                          <a [dirStoreAudit]="'ADD TO PACKET'">
                            <span id="{{data.data.stone_id}}{{result.name}}PktId" class="grid-icon icon-packet-add" (click)="stoneToOperateInPacket(data.data)"
                              pTooltip="{{'Select Packet'|translate}}" tooltipPosition="bottom" tooltipEvent="hover"></span>
                          </a>
                        </ng-template>
                      </span>
                      <span class="grid-icon-container">
                        <a [dirStoneMultimediaDetail]="{stoneid:data.data.stone_id,isDigiPlot: false}">
                          <span id="{{data.data.stone_id}}{{result.name}}ViewId" class="grid-icon icon-media"></span>
                        </a>
                      </span>
                      <span class="grid-icon-container-stoneid">
                        <a [dirStoreAudit]="'STONE DETAIL VIEW'" id="{{data.data.stone_id}}{{result.name}}StoneId" (click)="getPageRef(result);addStoneInfoTab(data.data, result)">{{data.data.stone_id}}</a>
                      </span>
                      <span class="grid-icon-container" *ngIf="data.data.isTwin && result.isIconVisible">
                        <a [dirStoreAudit]="'STD DETAIL VIEW'" id="{{data.data.stone_id}}{{result.name}}StoneId" [dirCustomEventAccessHandler]="'twin_diamond_detail_view'"
                          (customEvent)="getPageRef(result);addTwinStoneInfoTab(data.data.std_grp_no, searchResults, result)">
                          <span id="{{data.data.stone_id}}{{result.name}}STDId" pTooltip="{{'TWIN_DIAMOND_DETAIL_TEXT' |translate}}" tooltipPosition="bottom"
                            tooltipEvent="hover" class="icon  icon-Twin-Shape-Round "></span>
                        </a>
                      </span>
                      <span class="grid-icon-container mart0" *ngIf="(data.data.totalViewed > -1  && !(data.data.totalViewed === 0 && data.data.totalViewedByUser === 0)) && result.isIconVisible ">
                        <div class="icon-with-text">
                          <span id="{{data.data.stone_id}}{{result.name}}TotViewId" class="grid-icon icon-online-view"> </span>
                          <br>
                          <label>
                            <span pTooltip="{{'OTHERS_VIEW_TEXT'|translate}}" tooltipPosition="bottom" tooltipEvent="hover">{{data.data.totalViewed}}</span>
                            <span *ngIf="data.data.totalViewedByUser > -1" pTooltip="{{'MY_VIEW_TEXT'|translate}}" tooltipPosition="bottom" tooltipEvent="hover">/{{data.data.totalViewedByUser}}</span>
                          </label>
                        </div>
                      </span>
                      <span class="grid-icon-container mart0" *ngIf="data.data.totalViewRequest && result.isIconVisible">
                        <div class="icon-with-text">
                          <span id="{{data.data.stone_id}}{{result.name}}ViewReqId" class="grid-icon icon-my-view" pTooltip="{{(data.data.viewRequestStatus=== 2?'ALREADY_VIEWED_TEXT':'VIEW_REQUEST_TEXT') |translate}}"
                            tooltipPosition="bottom" tooltipEvent="hover" [ngClass]="{'text-red': data.data.viewRequestStatus=== 2}">
                          </span>
                          <br>
                          <label *ngIf="data.data.totalViewRequest > 1">
                            {{data.data.totalViewRequest}}</label>
                        </div>
                      </span>
                      <span class="grid-icon-container" *ngIf="data.data.isRecommended && result.isIconVisible">
                        <span id="{{data.data.stone_id}}{{result.name}}RecommendedId" pTooltip="{{'Recommended Stone'|translate}}" tooltipPosition="bottom" tooltipEvent="hover" class="grid-icon srk-recommend"></span>
                      </span>
                      <span class="grid-icon-container" *ngIf="data.data.isOnHold && result.isIconVisible">
                        <span id="{{data.data.stone_id}}{{result.name}}holdId" class="grid-icon icon-hold-list-option-2"></span>

                      </span>
                      <span class="grid-icon-container" *ngIf="data.data.isBasket && result.isIconVisible">
                        <span id="{{data.data.stone_id}}{{result.name}}CartId" pTooltip="{{(data.data.basketStatus==='<'?'BASKET_PRICE_REVISED_TEXT':'BASKET_TEXT') |translate}}"
                          tooltipPosition="bottom" tooltipEvent="hover" class="grid-icon icon-cart" [ngClass]="{ 'text-red': data.data.basketStatus==='<'}"></span>
                      </span>
                      <span class="grid-icon-container" *ngIf="data.data.b2b_state === 1 && result.isIconVisible">
                        <a (click)="openBTB(data.data)">
                          <span id="{{data.data.stone_id}}{{result.name}}B2BId" pTooltip="{{(data.data.isBtbUpdated === 1?'BID_SAVED':(data.data.isBtbUpdated === 2?'FINAL_SUBMITTED':'B2B_ACTIVE'))|translate}}"
                            tooltipPosition="bottom" tooltipEvent="hover" class="grid-icon icon-b2b" [ngClass]="{'text-red': data.data.isBtbUpdated === 1, 'text-green': data.data.isBtbUpdated === 2}">
                          </span>
                        </a>
                      </span>
                      <ng-template [dirCheckPermission]="'ddc_btn'">
                        <span class="grid-icon-container" *ngIf="data.data.business_process && result.isIconVisible">
                          <a (click)="updateDDC(data.data)">
                            <span pTooltip="{{(data.data.ddcStatus==='ACTIVE'?'DDC_ACTIVE':(data.data.ddcStatus==='INACTIVE'?'DDC_INACTIVE':'DDC_PUT')) |translate}}"
                              tooltipPosition="bottom" tooltipEvent="hover" id="{{data.data.stone_id}}{{result.name}}DDCId"
                              class="grid-icon icon-ddc" [ngClass]="{'text-green': data.data.ddcStatus==='ACTIVE' , 'text-red': data.data.ddcStatus==='INACTIVE'}">
                            </span>
                          </a>
                        </span>
                      </ng-template>

                      <span class="grid-icon-container mart0" *ngIf="data.data.haveNote  && result.isIconVisible">
                        <a>
                          <span id="{{data.data.stone_id}}notes" pTooltip="{{'NOTE'|translate}}" tooltipPosition="bottom" tooltipEvent="hover" class="grid-icon icon-note"
                            (click)="showAllCommentsForStone(data.data.notes)"></span>
                          <br>
                          <span *ngIf="data.data.haveNote" id="{{data.data.stone_id}}notesCount" class="note" (click)="showAllCommentsForStone(data.data.notes)">{{data.data.totalNotes}}
                          </span>
                        </a>
                      </span>
                      <span class="grid-icon-container" *ngIf="data.data.countryCode && result.isIconVisible">
                        <img id="{{data.data.stone_id}}Flag" class="stone-flag-icon" [src]=data.data.countryCode pTooltip={{data.data.tooltipMessage}}
                          tooltipPosition="bottom" tooltipEvent="hover">
                      </span>
                      <span *ngIf="data.data.color_legends" class="color-right color-legend-box" [ngClass]="{'show-packet-legend': visiblePacketIcon , 'twin-legend-panel': searchType == 'TWIN_DIAMOND_SEARCH', 'twin-legend-panel-packet':searchType == 'TWIN_DIAMOND_SEARCH' && visiblePacketIcon}">
                        <div id="{{data.data.stone_id}}{{result.name}}ColorId" class="color-indicator-panel" *ngFor="let color of data.data.color_legends">
                          <div id="{{data.data.stone_id}}{{result.name}}{{color}}Id" class="colorLagend_GRID" [ngClass]="{'color-legend-width-height':  result.isColumnExpanded === false, 'color-legend-height-width':  result.isColumnExpanded === true}"
                            [style.background-color]="color | safeStyle"></div>
                        </div>
                      </span>
                    </div>

                    <div *dxTemplate="let data of 'SgsTemplate'">
                      <span>{{data.data.sgs.toString()}}</span>
                    </div>

                </dx-data-grid>-->

                <app-infra-grid [(tableData)]="result.diamondTable" [widthInfo]="allColumnWidth" [gridHeight]="gridHeight" (stoneDetailInNewTab)="openStoneInNewTabTrigger($event, result.diamondTable)"
                                (allRowsSelected)="isAllStoneSelected(result, $event)" (singleRowSelected)="stoneSelected(result, $event)" (twinDiamondDetailInNewTab)="addTwinStoneInfoTab($event, searchResults, result)"
                                (updateDDCClicked)="updateDDC($event)" [gridName]="result.shortName" [resultObject]="result" [selectedStoneTableIsVisible]="result.toggleTableDisplay"
                                (displayNotesForSingleStoneInDialog)="showAllCommentsForStone($event)" [selectedStonesArray]="result.selectedStoneButton" (addStoneToPacket)="stoneToOperateInPacket($event)"
                                [visiblePacketIcon]="visiblePacketIcon" [packetIconDataForGrid]="packetIconDataForGrid" [userSelectedColumns]="selectedColumnList" [currentSelectedStones]="result.selectedStoneButton"
                                [stonesActedOn]="stonesActedOn" (displayIconsOverlay)="stoneMediaIconPanel($event)" [tabActive]="result.isActive" (b2bIconPopup)="openBTB($event)" [colorLegendFilter]="colorLegendFilterValue">
                </app-infra-grid>

              </div>


            </div>
            <dx-popover target="#download{{result.modifiedDate}}Search" position="bottom" [width]="141" [(visible)]="downloadPopOverVisible">
              <div *dxTemplate="let data of 'content'">
                <p-listbox [options]="downloadOptions" [(ngModel)]="selectedDownloadType" [style]="{'max-height':'250px', 'max-width':'100%'}"
                           (onChange)="downloadResult(result)">
                  <ng-template let-opt pTemplate="item">
                    <div class="ui-helper-clearfix">
                      <span style="font-size: 14px; margin: 15px 10px 0 0">{{opt.label}}</span>
                    </div>
                  </ng-template>
                </p-listbox>
              </div>
            </dx-popover>
          </div>
        </div>
        <div *ngIf="result.isModified">
          <app-specific-search [modifiySearchData]="result.searchFilterConfig" [searchFiltersValue]="result.searchFiltersValue" [showCancelBtn]="result.isModified"
                               (modify)="createModifiedSearchResult($event)" (cancelSearch)="cancelModifySearch($event,result)"></app-specific-search>
        </div>

        <!-- NEW SEARCH -->
        <div *ngIf="result.newSearch && visibleNewSearchTab && currentTabSelected === result.newSearch" id="{{result.newSearch}}ID"
             class="tab-pane" [ngClass]="{'fade in active': currentTabSelected === result.newSearch}">
          <app-specific-search (newSearch)="createNewSearchResult($event)"></app-specific-search>
        </div>

        <!-- STONE DETAILS PAGE -->
        <div *ngIf="result.stoneName && currentTabSelected === result.stoneName" id="{{result.stoneName}}ID" class="tab-pane" [ngClass]="{'fade in active': currentTabSelected === result.stoneName}"
             [hidden]="currentTabSelected !== result.stoneName">
          <div id="stonedetailssearch" class="ui-g-12 struck-details-page sms-page-container">
            <thm-stone-details [stoneDetails]="result.stoneInfo"></thm-stone-details>
          </div>
        </div>

        <!-- TWIN STONE DETAILS PAGE -->
        <div *ngIf="result.pairId && currentTabSelected === result.pairId" id="{{result.pairId}}ID" class="tab-pane" [ngClass]="{'fade in active': currentTabSelected === result.pairId}"
             [hidden]="currentTabSelected !== result.pairId">
          <div class="ui-g-12 struck-details-page sms-page-container">
            <thm-twin-stone-detail [twinStones]="result.twinStones"></thm-twin-stone-detail>
          </div>
        </div>
      </div>
      </div>

      </div>
    </div>
  </div>

  <ng-template #makeNewSearch>
    <div id="noSearchResultId" class="ui-g-12 no-search-result">{{'NO_RESULT_FOUND'|translate}}</div>
  </ng-template>

  <thm-addnote-overlay #thmAddnoteOverlay [visibleAddnoteOverlay]="addnoteOverlayVisible" [visibleShownoteOverlay]="commentsOverlayVisible"
    [stoneIdList]="selectedStones" [CommentListForStone]="allNotesForStone" (toggleAddNoteOverlay)="toggleAddNoteOverlay($event)"></thm-addnote-overlay>

  <thm-confirm-overlay [visibleConfirmOverlay]="confirmOverlayVisible" (toggleConfirmOverlay)="toggleConfirmOverlay($event)"
    [stoneList]="selectedStones"></thm-confirm-overlay>
  <thm-ddc-overlay #thmDdcOverlay [visibleDdcOverlay]="ddcOverlayVisible" [stoneList]="ddcStones" [previousDdcHour]="definedDDCHour"
    (toggleDdcOverlay)="toggleDdcOverlay($event)"></thm-ddc-overlay>
  <thm-bid-to-buy-overlay [visibleBTBOverlay]="btbOverlayVisible" [stoneList]="btbSelectedStones" (toggleBTBOverlay)="toggleBTBOverlay($event)"
    [BTBdataLoaded]="isBTBDataLoaded" [BTBClosed]="isBTBClosed"></thm-bid-to-buy-overlay>
  <thm-multimedia-popup #themeMultimediaPopUp [displayMultimediaPopup]="toggleMultimediaPopup" [popUpMultimediaInfo]="stoneMultimediaInfo"
    (closePopup)="toggleCloseMultimediaPopUp($event)"></thm-multimedia-popup>
    <thm-mediaicon #thmMediaIcon></thm-mediaicon>
<thm-media-icon *ngIf="displayIconOverlay"
                 [stoneObj]="iconDisplayStoneObject" [posX]="iconOverlayXPosition" [posY]="iconOverlayYPosition"
                 (closeIconOverlay)="closeGridIconOverlay($event)">
</thm-media-icon>
